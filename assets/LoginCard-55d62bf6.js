import{h as u,b as V,u as $,a as q,c as D,V as S,ar as I,j as e,d as r,F as U,W as s,T as t,i as p,B as C,P as W,ay as Y,ax as v,a0 as L,s as i,az as B,aA as M,m as N}from"./index-8ff37333.js";import{H as E}from"./chunk-7OLJDQMT-8574f9ef.js";import{F as T}from"./chunk-7COXQURZ-f9645faf.js";import{C as _}from"./chunk-P675YKMR-2809ecd7.js";import"./chunk-7D6N5TE5-68cf5556.js";import"./index-8d968404.js";function ee(){const[c,F]=u.useState({email:"",password:""}),[P,h]=u.useState(!1),[x,R]=u.useState(""),d=V(),m=$(),a=q(),{loading:j,isLogin:f}=D(o=>o.auth);let b=S("white","gray.700");const g=I();u.useEffect(()=>{f&&(g.state&&g.state.from?(console.log(g),d(g.state.from,{replace:!0})):d("/"))},[f]);const y=o=>{const{name:n,value:l}=o.target;F({...c,[n]:l})},k=async()=>{if(c.email===""||c.password==="")return i(a,"Please Fill All The Fields","error");try{const o=await m(B(c)).unwrap();i(a,"Login successfully","success"),O(),d("/")}catch(o){console.log("error",o),i(a,o.message?o.message:"Invalid Credentials","error")}},z=async()=>{x===""&&i(a,"Please Enter Your Email","error");try{const o=await m(M(x)).unwrap();i(a,"Reset OTP Sent To Your Email","success"),d("/resetpassword")}catch(o){i(a,o.message?o.message:"User Not Found","error"),console.error(o)}};let A={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};async function w(o){let n=o.coords;console.log("Your current position is:"),console.log(`Latitude : ${n.latitude}`),console.log(`Longitude: ${n.longitude}`),console.log(`More or less ${n.accuracy} meters.`);try{let l=await N.post("/auth/addlocation",{latitude:n.latitude,longitude:n.longitude},{headers:{"Content-Type":"application/json"}});console.log(l)}catch(l){console.log(l)}}function H(o){console.warn(`ERROR(${o.code}): ${o.message}`)}function O(){navigator.geolocation?navigator.permissions.query({name:"geolocation"}).then(function(o){o.state==="granted"?(console.log(o.state),navigator.geolocation.getCurrentPosition(w)):o.state==="prompt"?navigator.geolocation.getCurrentPosition(w,H,A):o.state==="denied"&&console.log("denied",o),o.onchange=function(){console.log(o.state)}}):console.log("Geolocation is not available on this device.")}return e.jsxs(e.Fragment,{children:[e.jsx(r,{marginTop:["-5px","-10px","-20px","-30px","-40px"]}),e.jsx(U,{minH:"75vh",align:"center",justify:"center",bg:S("gray.50","gray.800"),width:"100%",children:P?e.jsxs(s,{spacing:5,mx:"auto",maxW:"2xl",py:10,px:10,children:[e.jsxs(s,{align:"center",spacing:2,children:[e.jsx(E,{fontSize:"4xl",children:"Enter Your Email"}),e.jsx(t,{color:"gray.600",fontSize:"lg",children:"This OTP will be sent to your email."})]}),e.jsx(r,{rounded:"lg",bg:b,boxShadow:"lg",p:8,children:e.jsxs(s,{spacing:4,children:[e.jsx(t,{color:"gray.600",fontSize:"md",fontWeight:"bold",children:"Email Address"}),e.jsx(p,{type:"email",value:x,onChange:o=>R(o.target.value),variant:"filled",placeholder:"Enter your email address",required:!0}),e.jsxs(s,{spacing:3,children:[e.jsx(C,{bg:"blue.400",color:"white",bgColor:"rgb(0,0,0)",_hover:{boxShadow:"xl"},onClick:z,children:"Submit"}),e.jsxs(r,{justifyContent:"center",alignItems:"center",display:"flex",children:["Return To"," ",e.jsx(t,{ml:1,textDecorationLine:"underline",color:"blue.400",cursor:"pointer",onClick:()=>h(!1),children:j?e.jsxs(W,{children:[e.jsx(Y,{})," ",e.jsx(t,{children:'"Please wait..."'})]}):"Login"})]})]})]})})]}):e.jsxs(s,{spacing:8,mx:"auto",maxW:"2xl",py:10,px:10,children:[e.jsxs(s,{align:"center",children:[e.jsx(E,{fontSize:"3xl",children:"Login to your account"}),e.jsxs(t,{fontSize:"lg",color:"gray.600",children:["to buy all of our cool ",e.jsx(v,{color:"blue.400",children:"Products"})," ","✌️"]})]}),e.jsx(r,{rounded:"lg",bg:b,boxShadow:"lg",p:9,children:e.jsxs(s,{spacing:3,children:[e.jsxs(L,{id:"email",isRequired:!0,children:[e.jsx(T,{children:"Email address"}),e.jsx(p,{name:"email",type:"email",onChange:y})]}),e.jsxs(L,{id:"password",isRequired:!0,children:[e.jsx(T,{children:"Password"}),e.jsx(p,{name:"password",onChange:y,type:"password"})]}),e.jsxs(s,{spacing:5,children:[e.jsxs(s,{direction:{base:"column",sm:"row"},align:"start",justify:"space-between",children:[e.jsx(_,{children:"Remember me"}),e.jsx(t,{cursor:"pointer",color:"blue.400",onClick:()=>h(!0),children:"Forgot password?"})]}),e.jsx(C,{isLoading:j,loadingText:"Validating...",bg:"blue.400",color:"white",bgColor:"rgb(0,0,0)",_hover:{boxShadow:"xl"},onClick:k,mb:-2,children:"Login"})]}),e.jsx(s,{children:e.jsxs(r,{justifyContent:"center",alignItems:"center",display:"flex",children:["Don't have a account?",e.jsx(v,{to:"/signup",children:e.jsx(t,{ml:1,textDecorationLine:"underline",color:"blue.400",children:"Sign Up"})})]})})]})})]})}),e.jsx(r,{marginTop:["-10px","-20px","-30px","-40px","-40px"]})]})}export{ee as default};
